# üåç Variables d'environnement pour DealToBook avec GHCR
# Configuration optimis√©e pour la production

# ===== GITHUB CONTAINER REGISTRY =====
GITHUB_USERNAME=skaouech
REGISTRY=ghcr.io
CR_PAT=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

# ===== INFRASTRUCTURE =====
HOSTINGER_IP=148.230.114.13
HOSTINGER_USER=root

# ===== DATABASE =====
POSTGRES_PASSWORD=DealToBook2024SecurePassword!
POSTGRES_USER=dealtobook
POSTGRES_DB=dealtobook_db

# ===== KEYCLOAK =====
KEYCLOAK_ADMIN_PASSWORD=KeycloakAdmin2024Secure!
KEYCLOAK_CLIENT_SECRET=dealtobook-secret-2024-production
KC_HOSTNAME=keycloak-dev.dealtobook.com

# ===== MONITORING =====
GRAFANA_ADMIN_PASSWORD=GrafanaAdmin2024Secure!

# ===== APPLICATION VERSIONING =====
APP_VERSION=1.0.0
BUILD_NUMBER=${GITHUB_RUN_NUMBER:-local}
COMMIT_SHA=${GITHUB_SHA:-unknown}

# ===== JVM OPTIMIZATION =====
JAVA_OPTS_COMMON=-XX:+UseG1GC -XX:+UseStringDeduplication -XX:MaxRAMPercentage=75.0
JAVA_OPTS_GENERATOR=-Xmx1536m -Xms512m ${JAVA_OPTS_COMMON}
JAVA_OPTS_SECURITY=-Xmx1536m -Xms512m ${JAVA_OPTS_COMMON}
JAVA_OPTS_SETTING=-Xmx1536m -Xms512m ${JAVA_OPTS_COMMON}

# ===== SPRING BOOT PROFILES =====
SPRING_PROFILES_ACTIVE=prod
SPRING_PROFILES_INCLUDE=swagger

# ===== LOGGING =====
LOGGING_LEVEL_ROOT=INFO
LOGGING_LEVEL_DEALTOBOOK=INFO
LOGGING_LEVEL_TECH_JHIPSTER=INFO
LOGGING_PATTERN_CONSOLE=%d{yyyy-MM-dd HH:mm:ss} - %msg%n
LOGGING_PATTERN_FILE=%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{36} - %msg%n

# ===== DATABASE OPTIMIZATION =====
HIKARI_MAXIMUM_POOL_SIZE=20
HIKARI_MINIMUM_IDLE=5
HIKARI_CONNECTION_TIMEOUT=20000
HIKARI_IDLE_TIMEOUT=300000
HIKARI_MAX_LIFETIME=1200000

# ===== MONITORING & OBSERVABILITY =====
MANAGEMENT_PROMETHEUS_METRICS_EXPORT_ENABLED=true
MANAGEMENT_ZIPKIN_TRACING_ENDPOINT=http://zipkin:9411/api/v2/spans
MANAGEMENT_TRACING_SAMPLING_PROBABILITY=0.1
MANAGEMENT_HEALTH_PROBES_ENABLED=true

# ===== SECURITY =====
SPRING_SECURITY_REQUIRE_SSL=true
SPRING_SECURITY_OAUTH2_RESOURCESERVER_JWT_ISSUER_URI=https://keycloak-dev.dealtobook.com/realms/dealtobook

# ===== CORS CONFIGURATION =====
CORS_ALLOWED_ORIGINS=https://administration-dev.dealtobook.com,https://website-dev.dealtobook.com
CORS_ALLOWED_METHODS=GET,POST,PUT,DELETE,OPTIONS,PATCH
CORS_ALLOWED_HEADERS=*
CORS_ALLOW_CREDENTIALS=true

# ===== RATE LIMITING =====
RATE_LIMIT_ENABLED=true
RATE_LIMIT_REQUESTS_PER_MINUTE=100
RATE_LIMIT_REQUESTS_PER_HOUR=1000

# ===== CACHE CONFIGURATION =====
SPRING_CACHE_TYPE=redis
SPRING_REDIS_HOST=redis
SPRING_REDIS_PORT=6379
SPRING_REDIS_TIMEOUT=2000ms
SPRING_REDIS_LETTUCE_POOL_MAX_ACTIVE=8
SPRING_REDIS_LETTUCE_POOL_MAX_IDLE=8
SPRING_REDIS_LETTUCE_POOL_MIN_IDLE=0

# ===== SESSION MANAGEMENT =====
SPRING_SESSION_STORE_TYPE=redis
SPRING_SESSION_TIMEOUT=30m
SERVER_SERVLET_SESSION_COOKIE_SECURE=true
SERVER_SERVLET_SESSION_COOKIE_HTTP_ONLY=true
SERVER_SERVLET_SESSION_COOKIE_SAME_SITE=strict

# ===== FRONTEND CONFIGURATION =====
NODE_ENV=production
API_BASE_URL_WEBUI=https://administration-dev.dealtobook.com/api
API_BASE_URL_WEBSITE=https://website-dev.dealtobook.com/api

# ===== NGINX CONFIGURATION =====
NGINX_WORKER_PROCESSES=auto
NGINX_WORKER_CONNECTIONS=1024
NGINX_KEEPALIVE_TIMEOUT=65
NGINX_CLIENT_MAX_BODY_SIZE=10m

# ===== SSL/TLS CONFIGURATION =====
SSL_CERTIFICATE_PATH=/etc/letsencrypt/live/administration-dev.dealtobook.com/fullchain.pem
SSL_CERTIFICATE_KEY_PATH=/etc/letsencrypt/live/administration-dev.dealtobook.com/privkey.pem

# ===== BACKUP CONFIGURATION =====
BACKUP_ENABLED=true
BACKUP_SCHEDULE=0 2 * * *
BACKUP_RETENTION_DAYS=30
BACKUP_S3_BUCKET=dealtobook-backups-prod

# ===== EXTERNAL SERVICES =====
# Google Maps API (si utilis√©)
GOOGLE_MAPS_API_KEY=your_google_maps_api_key_here

# SendGrid/SMTP (pour les emails)
SPRING_MAIL_HOST=smtp.sendgrid.net
SPRING_MAIL_PORT=587
SPRING_MAIL_USERNAME=apikey
SPRING_MAIL_PASSWORD=your_sendgrid_api_key_here
SPRING_MAIL_PROPERTIES_MAIL_SMTP_AUTH=true
SPRING_MAIL_PROPERTIES_MAIL_SMTP_STARTTLS_ENABLE=true

# ===== FEATURE FLAGS =====
FEATURE_REGISTRATION_ENABLED=true
FEATURE_EMAIL_VERIFICATION=true
FEATURE_SOCIAL_LOGIN=true
FEATURE_ANALYTICS_ENABLED=true
FEATURE_MAINTENANCE_MODE=false

# ===== PERFORMANCE TUNING =====
SERVER_TOMCAT_MAX_THREADS=200
SERVER_TOMCAT_MIN_SPARE_THREADS=10
SERVER_TOMCAT_MAX_CONNECTIONS=8192
SERVER_TOMCAT_ACCEPT_COUNT=100
SERVER_TOMCAT_CONNECTION_TIMEOUT=20000

# ===== ACTUATOR ENDPOINTS =====
MANAGEMENT_ENDPOINTS_WEB_EXPOSURE_INCLUDE=health,info,metrics,prometheus
MANAGEMENT_ENDPOINT_HEALTH_SHOW_DETAILS=when_authorized
MANAGEMENT_INFO_ENV_ENABLED=true

# ===== TIMEZONE =====
TZ=Europe/Paris
SPRING_JPA_PROPERTIES_HIBERNATE_JDBC_TIME_ZONE=Europe/Paris


# Logging levels
LOGGIN_DEALTOBOOK_SETTING=INFO
LOGGIN_DEALTOBOOK_GENERATOR=INFO
LOGGIN_DEALTOBOOK_SECURITY=INFO
