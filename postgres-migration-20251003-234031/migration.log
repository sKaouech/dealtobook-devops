[0;34m[2025-10-03 23:40:31][0m 🔍 Vérification des prérequis...
[0;32m✅ Prérequis validés[0m
[0;34m[2025-10-03 23:40:34][0m 🔗 Test de connexion à Azure PostgreSQL...
[0;32m✅ Connexion Azure PostgreSQL réussie[0m
[0;34m[2025-10-03 23:40:35][0m 🔗 Test de connexion à Hostinger PostgreSQL...
[0;32m✅ Connexion Hostinger PostgreSQL réussie[0m
[0;34m[2025-10-03 23:40:41][0m 💾 Sauvegarde des bases de données Azure...
[0;34m[2025-10-03 23:40:41][0m   Sauvegarde de la base deal_generator...
[0;32m✅   Base deal_generator sauvegardée (128K)[0m
[0;32m✅   Base deal_generator compressée[0m
[0;34m[2025-10-03 23:40:58][0m   Sauvegarde de la base keycloak...
[0;32m✅   Base keycloak sauvegardée ( 13M)[0m
[0;32m✅   Base keycloak compressée[0m
[0;34m[2025-10-03 23:42:00][0m   Sauvegarde de la base deal_setting...
[0;32m✅   Base deal_setting sauvegardée ( 18M)[0m
[0;32m✅   Base deal_setting compressée[0m
[0;34m[2025-10-03 23:42:47][0m 🗄️ Préparation des bases de données sur Hostinger...
[1;33m⚠️  PostgreSQL déjà démarré[0m
[0;34m[2025-10-03 23:42:54][0m   Attente de PostgreSQL (30s)...
[0;34m[2025-10-03 23:43:24][0m   Création de la base deal_generator sur Hostinger...
[0;32m✅   Base deal_generator prête sur Hostinger[0m
[0;34m[2025-10-03 23:44:08][0m   Création de la base keycloak sur Hostinger...
[1;33m⚠️  Base keycloak existe déjà[0m
[0;32m✅   Base keycloak prête sur Hostinger[0m
[0;34m[2025-10-03 23:44:13][0m   Création de la base deal_setting sur Hostinger...
[1;33m⚠️  Base deal_setting existe déjà[0m
[0;32m✅   Base deal_setting prête sur Hostinger[0m
[0;34m[2025-10-03 23:44:19][0m 📤 Transfert des sauvegardes vers Hostinger...
[0;34m[2025-10-03 23:44:22][0m   Transfert de deal_generator...
[0;32m✅   deal_generator transféré[0m
[0;34m[2025-10-03 23:44:26][0m   Transfert de keycloak...
[0;32m✅   keycloak transféré[0m
[0;34m[2025-10-03 23:44:36][0m   Transfert de deal_setting...
[0;32m✅   deal_setting transféré[0m
[0;34m[2025-10-03 23:44:45][0m 🔄 Restauration des bases de données sur Hostinger...
[0;34m[2025-10-03 23:44:45][0m   Restauration de deal_generator...
[0;32m✅   Base deal_generator restaurée[0m
[0;34m[2025-10-03 23:45:03][0m   Restauration de keycloak...
[0;32m✅   Base keycloak restaurée[0m
[0;34m[2025-10-03 23:49:01][0m   Restauration de deal_setting...
[0;32m✅   Base deal_setting restaurée[0m
[0;34m[2025-10-03 23:49:48][0m 🔍 Vérification de la migration...
[0;34m[2025-10-03 23:49:48][0m   Vérification de deal_generator...
[0;32m✅   deal_generator: 13 tables migrées ✅[0m
[0;32m✅     Table users:  enregistrements ✅[0m
[0;32m✅     Table deals:  enregistrements ✅[0m
[0;32m✅     Table settings:  enregistrements ✅[0m
[0;32m✅     Table roles:  enregistrements ✅[0m
[0;34m[2025-10-03 23:50:23][0m   Vérification de keycloak...
[0;32m✅   keycloak: 99 tables migrées ✅[0m
[0;32m✅     Table users:  enregistrements ✅[0m
[0;32m✅     Table deals:  enregistrements ✅[0m
[0;32m✅     Table settings:  enregistrements ✅[0m
[0;32m✅     Table roles:  enregistrements ✅[0m
[0;34m[2025-10-03 23:50:56][0m   Vérification de deal_setting...
[1;33m⚠️    deal_setting: Azure(70) ≠ Hostinger(72) tables[0m
[0;32m✅     Table users:  enregistrements ✅[0m
[0;32m✅     Table deals:  enregistrements ✅[0m
[0;32m✅     Table settings:  enregistrements ✅[0m
[0;32m✅     Table roles:  enregistrements ✅[0m
[0;34m[2025-10-03 23:51:30][0m 🧹 Nettoyage des fichiers temporaires...
[0;35mℹ️  Backups conservés dans: ./postgres-migration-20251003-234031[0m
[0;32m✅ Nettoyage terminé[0m
[0;34m[2025-10-03 23:51:34][0m ⚙️ Mise à jour de la configuration des applications...
[0;35mℹ️  Les applications DealToBook sont déjà configurées pour utiliser:[0m
[0;35mℹ️    • deal_generator → deal_generator[0m
[0;35mℹ️    • deal_security → keycloak[0m
[0;35mℹ️    • deal_setting → deal_setting[0m
[0;35mℹ️  Configuration dans docker-compose.ghcr.yml:[0m
[0;35mℹ️    SPRING_DATASOURCE_URL: jdbc:postgresql://postgres:5432/[database_name][0m
[0;32m✅ Configuration des applications OK[0m
[0;34m[2025-10-03 23:51:34][0m ✅ MIGRATION TERMINÉE !
